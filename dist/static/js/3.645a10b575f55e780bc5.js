webpackJsonp([3],{"A+wo":function(e,t,a){"use strict";var n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"user",on:{click:e.jumpPage}},[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"desc"},[e._v("\n      "+e._s(e.desc)+"\n      "),a("span",{staticClass:"iconfont iconjiantou1"})])])])},staticRenderFns:[]};var i=a("VU/8")({props:["label","desc"],methods:{jumpPage:function(){this.$emit("click")}}},n,!1,function(e){a("v8YN")},"data-v-dbbc2c88",null);t.a=i.exports},hWHn:function(e,t){},v8YN:function(e,t){},wbS3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("TixB"),i={data:function(){return{profile:{},isShowNickname:!1,isShowPwd:!1,isShowGender:!1,newNickname:"",newPwd:"",genderList:[{name:"男"},{name:"女"}]}},components:{cellBar:a("A+wo").a,headerMiddle:n.a},methods:{getData:function(){var e=this;this.$axios({url:"/user/"+localStorage.getItem("user_id"),method:"GET"}).then(function(t){e.profile=t.data.data,e.profile.head_img?e.profile.head_img=e.$axios.defaults.baseURL+e.profile.head_img:e.profile.head_img="https://p3.pstatp.com/list/190x124/pgc-image/Rft0hGGCLk6YgJ",e.profile.gender=0==e.profile.gender?"女":"男"})},editProfile:function(e){this.$axios({url:"/user_update/"+localStorage.getItem("user_id"),method:"POST",headers:{Authorization:localStorage.getItem("token")},data:e}).then(function(e){console.log(e)}),this.getData()},selectGender:function(e){console.log(e.name),this.editProfile({gender:"男"==e.name?1:0}),this.isShowGender=!1},afterRead:function(e){var t=this,a=new FormData;a.append("file",e.file),this.$axios({url:"/upload",method:"POST",data:a}).then(function(e){console.log(e.data),t.editProfile({head_img:e.data.data.url})})}},mounted:function(){this.getData()}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("headerMiddle",{attrs:{title:"编辑资料"}}),e._v(" "),a("div",{staticClass:"avatar"},[a("img",{staticClass:"avatar-img",attrs:{src:e.profile.head_img,alt:""}}),e._v(" "),a("van-uploader",{staticClass:"uploadFile",attrs:{"after-read":e.afterRead}})],1),e._v(" "),a("cellBar",{attrs:{desc:e.profile.nickname,label:"昵称"},on:{click:function(t){e.isShowNickname=!0}}}),e._v(" "),a("cellBar",{attrs:{desc:"******",label:"密码"},on:{click:function(t){e.isShowPwd=!0}}}),e._v(" "),a("cellBar",{attrs:{desc:e.profile.gender,label:"性别"},on:{click:function(t){e.isShowGender=!0}}}),e._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"",title:"编辑昵称","use-slot":""},on:{confirm:function(t){return e.editProfile({nickname:e.newNickname})}},model:{value:e.isShowNickname,callback:function(t){e.isShowNickname=t},expression:"isShowNickname"}},[a("van-field",{attrs:{focus:"true",placeholder:"请输入用户名"},model:{value:e.newNickname,callback:function(t){e.newNickname=t},expression:"newNickname"}})],1),e._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"",title:"编辑密码","use-slot":""},on:{confirm:function(t){return e.editProfile({password:e.newPwd})}},model:{value:e.isShowPwd,callback:function(t){e.isShowPwd=t},expression:"isShowPwd"}},[a("van-field",{attrs:{focus:"true",placeholder:"请输入密码",type:"password"},model:{value:e.newPwd,callback:function(t){e.newPwd=t},expression:"newPwd"}})],1),e._v(" "),a("van-action-sheet",{attrs:{actions:e.genderList,"cancel-text":"取消"},on:{select:e.selectGender},model:{value:e.isShowGender,callback:function(t){e.isShowGender=t},expression:"isShowGender"}})],1)},staticRenderFns:[]};var s=a("VU/8")(i,o,!1,function(e){a("hWHn")},"data-v-a42b30ea",null);t.default=s.exports}});
//# sourceMappingURL=3.645a10b575f55e780bc5.js.map
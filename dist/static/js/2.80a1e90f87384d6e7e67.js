webpackJsonp([2],{"7RMH":function(t,e){},"F5/h":function(t,e){},Xsy7:function(t,e){},lVAl:function(t,e,n){"use strict";var s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.floorItem.parent?n("floor",{attrs:{floorItem:t.floorItem.parent,parentLength:t.parentLength-1},on:{reply:t.reply}}):t._e(),t._v(" "),n("div",{staticClass:"floorWrapper"},[n("div",{staticClass:"meta"},[n("div",{staticClass:"info"},[t._v("\n        "+t._s(t.parentLength)+" "+t._s(t.floorItem.user.nickname)+"\n        "),n("span",{staticClass:"time"},[t._v(t._s(t.parentLength)+"小时前")])]),t._v(" "),n("div",{staticClass:"btnApply",on:{click:t.reply}},[t._v("回复")])]),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(t.floorItem.content))])])],1)},staticRenderFns:[]};var o={props:["commentItem"],components:{floor:n("VU/8")({props:["floorItem","parentLength"],name:"floor",methods:{reply:function(t){t.id?this.$emit("reply",t):this.$emit("reply",{id:this.floorItem.id})}}},s,!1,function(t){n("7RMH")},"data-v-9eff188a",null).exports},data:function(){return{parentLength:this.countParent(0,this.commentItem)}},methods:{countParent:function(t,e){return e.parent?this.countParent(t+1,e.parent):t},reply:function(t){t.id?this.$emit("reply",t):this.$emit("reply",{id:this.commentItem.id})}}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"commentWraper"},[n("div",{staticClass:"meta"},[n("img",{staticClass:"avatar",attrs:{alt:"",src:"/static/imgs/default.png"}}),t._v(" "),n("div",{staticClass:"info"},[t.commentItem.user?n("div",{staticClass:"name"},[t._v(t._s(t.commentItem.user.nickname))]):t._e(),t._v(" "),n("span",{staticClass:"time"},[t._v("2小时前")])]),t._v(" "),n("div",{staticClass:"btnApply",on:{click:t.reply}},[t._v("回复")])]),t._v(" "),t.commentItem.parent?n("floor",{attrs:{floorItem:t.commentItem.parent,parentLength:t.parentLength},on:{reply:t.reply}}):t._e(),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(t.commentItem.content))])],1)])},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(t){n("mjD8")},"data-v-4d260aaf",null);e.a=a.exports},mjD8:function(t,e){},rkWN:function(t,e,n){"use strict";var s={props:["post","isAcitve","commentId"],data:function(){return{isFocus:!1,comment:""}},watch:{isAcitve:function(){this.isFocus=this.isAcitve,console.log(this.isFocus)}},methods:{send:function(){var t=this;this.$axios({url:"/post_comment/"+this.post.id,method:"POST",data:{content:this.comment,parent_id:this.commentId?this.commentId.id:null}}).then(function(e){console.log(e.data),t.comment="",t.isFocus=!1,t.$emit("newComment")})},showArea:function(){var t=this;this.isFocus=!0,this.$nextTick(function(){t.$refs.commentArea.focus()})},handleBlur:function(){this.comment||(this.isFocus=!1)},star:function(){var t=this;this.$axios({url:"/post_star/"+this.post.id,method:"GET"}).then(function(e){console.log(e);var n=e.data.message;"收藏成功"==n?t.post.has_star=!0:"取消成功"==n&&(t.post.has_star=!1),console.log(n)})}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer"},[t.isFocus?t._e():n("div",{staticClass:"disable"},[n("input",{attrs:{placeholder:"写跟帖",type:"text"},on:{focus:t.showArea}}),t._v(" "),t._m(0),t._v(" "),n("span",{staticClass:"iconfont iconshoucang",class:{red:t.post.has_star},on:{click:t.star}}),t._v(" "),t._m(1)]),t._v(" "),t.isFocus?n("div",{staticClass:"enable"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],ref:"commentArea",attrs:{rows:"3"},domProps:{value:t.comment},on:{blur:t.handleBlur,input:function(e){e.target.composing||(t.comment=e.target.value)}}}),t._v(" "),n("span",{staticClass:"send",on:{click:t.send}},[t._v("发送")])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"comment"},[e("span",{staticClass:"iconfont iconpinglun-"}),this._v(" "),e("div",{staticClass:"commentNumber"},[this._v("102")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/Getting_Started/Explanation_of_interface_privileges.html"}},[e("span",{staticClass:"iconfont iconfenxiang"})])}]};var i=n("VU/8")(s,o,!1,function(t){n("F5/h")},"data-v-8b1f0f64",null);e.a=i.exports},vizL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("TixB"),o=n("rkWN"),i=n("lVAl"),a={components:{headerMiddle:s.a,postDetailFooter:o.a,comment:i.a},data:function(){return{postId:this.$route.params.id,post:{},comments:[],replyActive:0,commentId:{}}},methods:{reply:function(t){this.commentId=t,this.replyActive+=1},getComments:function(){var t=this;this.$axios({url:"/post_comment/"+this.postId,method:"get"}).then(function(e){var n=e.data.data;console.log(n),t.comments=n})}},mounted:function(){var t=this;this.$axios({url:"/post/"+this.postId,method:"get"}).then(function(e){var n=e.data.data;t.post=n}),this.getComments()}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("headerMiddle",{attrs:{title:"更多跟帖"}}),t._v(" "),t._l(t.comments,function(e,s){return n("comment",{key:s,attrs:{commentItem:e},on:{reply:t.reply}})}),t._v(" "),n("postDetailFooter",{attrs:{commentId:t.commentId,isAcitve:t.replyActive,post:t.post},on:{newComment:t.getComments}})],2)},staticRenderFns:[]};var c=n("VU/8")(a,r,!1,function(t){n("Xsy7")},null,null);e.default=c.exports}});
//# sourceMappingURL=2.80a1e90f87384d6e7e67.js.map
webpackJsonp([1],{"/jAF":function(t,s){},"7RMH":function(t,s){},"F5/h":function(t,s){},jtzX:function(t,s){},lVAl:function(t,s,e){"use strict";var n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[t.floorItem.parent?e("floor",{attrs:{floorItem:t.floorItem.parent,parentLength:t.parentLength-1},on:{reply:t.reply}}):t._e(),t._v(" "),e("div",{staticClass:"floorWrapper"},[e("div",{staticClass:"meta"},[e("div",{staticClass:"info"},[t._v("\n        "+t._s(t.parentLength)+" "+t._s(t.floorItem.user.nickname)+"\n        "),e("span",{staticClass:"time"},[t._v(t._s(t.parentLength)+"小时前")])]),t._v(" "),e("div",{staticClass:"btnApply",on:{click:t.reply}},[t._v("回复")])]),t._v(" "),e("div",{staticClass:"content"},[t._v(t._s(t.floorItem.content))])])],1)},staticRenderFns:[]};var o={props:["commentItem"],components:{floor:e("VU/8")({props:["floorItem","parentLength"],name:"floor",methods:{reply:function(t){t.id?this.$emit("reply",t):this.$emit("reply",{id:this.floorItem.id})}}},n,!1,function(t){e("7RMH")},"data-v-9eff188a",null).exports},data:function(){return{parentLength:this.countParent(0,this.commentItem)}},methods:{countParent:function(t,s){return s.parent?this.countParent(t+1,s.parent):t},reply:function(t){t.id?this.$emit("reply",t):this.$emit("reply",{id:this.commentItem.id})}}},i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"commentWraper"},[e("div",{staticClass:"meta"},[e("img",{staticClass:"avatar",attrs:{alt:"",src:"/static/imgs/default.png"}}),t._v(" "),e("div",{staticClass:"info"},[t.commentItem.user?e("div",{staticClass:"name"},[t._v(t._s(t.commentItem.user.nickname))]):t._e(),t._v(" "),e("span",{staticClass:"time"},[t._v("2小时前")])]),t._v(" "),e("div",{staticClass:"btnApply",on:{click:t.reply}},[t._v("回复")])]),t._v(" "),t.commentItem.parent?e("floor",{attrs:{floorItem:t.commentItem.parent,parentLength:t.parentLength},on:{reply:t.reply}}):t._e(),t._v(" "),e("div",{staticClass:"content"},[t._v(t._s(t.commentItem.content))])],1)])},staticRenderFns:[]};var a=e("VU/8")(o,i,!1,function(t){e("mjD8")},"data-v-4d260aaf",null);s.a=a.exports},mjD8:function(t,s){},rkWN:function(t,s,e){"use strict";var n={props:["post","isAcitve","commentId"],data:function(){return{isFocus:!1,comment:""}},watch:{isAcitve:function(){this.isFocus=this.isAcitve,console.log(this.isFocus)}},methods:{send:function(){var t=this;this.$axios({url:"/post_comment/"+this.post.id,method:"POST",data:{content:this.comment,parent_id:this.commentId?this.commentId.id:null}}).then(function(s){console.log(s.data),t.comment="",t.isFocus=!1,t.$emit("newComment")})},showArea:function(){var t=this;this.isFocus=!0,this.$nextTick(function(){t.$refs.commentArea.focus()})},handleBlur:function(){this.comment||(this.isFocus=!1)},star:function(){var t=this;this.$axios({url:"/post_star/"+this.post.id,method:"GET"}).then(function(s){console.log(s);var e=s.data.message;"收藏成功"==e?t.post.has_star=!0:"取消成功"==e&&(t.post.has_star=!1),console.log(e)})}}},o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"footer"},[t.isFocus?t._e():e("div",{staticClass:"disable"},[e("input",{attrs:{placeholder:"写跟帖",type:"text"},on:{focus:t.showArea}}),t._v(" "),t._m(0),t._v(" "),e("span",{staticClass:"iconfont iconshoucang",class:{red:t.post.has_star},on:{click:t.star}}),t._v(" "),t._m(1)]),t._v(" "),t.isFocus?e("div",{staticClass:"enable"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],ref:"commentArea",attrs:{rows:"3"},domProps:{value:t.comment},on:{blur:t.handleBlur,input:function(s){s.target.composing||(t.comment=s.target.value)}}}),t._v(" "),e("span",{staticClass:"send",on:{click:t.send}},[t._v("发送")])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"comment"},[s("span",{staticClass:"iconfont iconpinglun-"}),this._v(" "),s("div",{staticClass:"commentNumber"},[this._v("102")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/Getting_Started/Explanation_of_interface_privileges.html"}},[s("span",{staticClass:"iconfont iconfenxiang"})])}]};var i=e("VU/8")(n,o,!1,function(t){e("F5/h")},"data-v-8b1f0f64",null);s.a=i.exports},t5Lq:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n={props:["post"],methods:{follow:function(){var t=this;this.$axios({url:"/user_follows/"+this.post.user.id,method:"GET"}).then(function(s){console.log(s),"关注成功"==s.data.message&&(t.post.has_follow=!0)})},unfollow:function(){var t=this;this.$axios({url:"/user_unfollow/"+this.post.user.id,method:"GET"}).then(function(s){console.log(s),"取消关注成功"==s.data.message&&(t.post.has_follow=!1)})}}},o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"head"},[e("div",{staticClass:"left",on:{click:function(s){return t.$router.back()}}},[e("span",{staticClass:"iconfont iconjiantou2"}),t._v(" "),e("span",{staticClass:"iconfont iconnew"})]),t._v(" "),t.post.has_follow?t._e():e("span",{staticClass:"follow",on:{click:t.follow}},[t._v("关注")]),t._v(" "),t.post.has_follow?e("span",{staticClass:"alfollow",on:{click:t.unfollow}},[t._v("已关注")]):t._e()])},staticRenderFns:[]};var i=e("VU/8")(n,o,!1,function(t){e("/jAF")},"data-v-5861bc2e",null).exports,a=e("rkWN"),c=e("lVAl"),r={components:{postDetailHead:i,postDetailFooter:a.a,comment:c.a},data:function(){return{postId:this.$route.params.id,post:{},comments:[],replyActive:0,commentId:{}}},methods:{reply:function(t){this.commentId=t,this.replyActive+=1},like:function(){var t=this;this.$axios({url:"/post_like/"+this.post.id,method:"get"}).then(function(s){var e=s.data.message;"点赞成功"==e?(t.post.has_like=!0,t.post.like_length+=1):"取消成功"==e&&(t.post.has_like=!1,t.post.like_length-=1),console.log(e)})},toMoreComments:function(){this.$router.push({name:"moreCommentsPage",params:{id:this.postId}})},getComments:function(){var t=this;this.$axios({url:"/post_comment/"+this.postId,params:{pageSize:3},method:"get"}).then(function(s){var e=s.data.data;console.log(e),t.comments=e})}},mounted:function(){var t=this;this.$axios({url:"/post/"+this.postId,method:"get"}).then(function(s){var e=s.data.data;t.post=e}),this.getComments()}},l={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("postDetailHead",{attrs:{post:t.post}}),t._v(" "),e("div",{staticClass:"mainContent"},[e("div",{staticClass:"title"},[t._v(t._s(t.post.title))]),t._v(" "),2==t.post.type?e("video",{staticClass:"video",attrs:{poster:t.post.cover[0].url,controls:"controls",src:"https://video.pearvideo.com/mp4/adshort/20191031/cont-1618052-14544566_adpkg-ad_sd.mp4"}}):t._e(),t._v(" "),t.post.user?e("div",{staticClass:"info"},[t._v(t._s(t.post.user.nickname)+" 2019-10-31")]):t._e(),t._v(" "),2!=t.post.type?e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.post.content)}}):t._e(),t._v(" "),e("div",{staticClass:"actionBtn"},[e("div",{staticClass:"like"},[e("span",{staticClass:"iconfont icondianzan",class:{red:t.post.has_like},on:{click:t.like}}),t._v("\n        "+t._s(t.post.like_length)+"\n      ")]),t._v(" "),t._m(0)]),t._v(" "),e("div",{staticClass:"commentList"},[e("h2",{staticClass:"title"},[t._v("精彩跟帖")]),t._v(" "),0==t.post.comment_length?e("div",[e("div",[t._v("暂无跟帖,抢占沙发")])]):t._l(t.comments,function(s,n){return e("comment",{key:n,attrs:{commentItem:s},on:{reply:t.reply}})}),t._v(" "),e("div",{staticClass:"more"},[e("div",{staticClass:"moreComment",on:{click:t.toMoreComments}},[t._v("更多跟帖")])])],2)]),t._v(" "),e("postDetailFooter",{attrs:{commentId:t.commentId,isAcitve:t.replyActive,post:t.post},on:{newComment:t.getComments}})],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"webchat"},[s("span",{staticClass:"iconfont iconweixin"}),this._v(" "),s("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/Getting_Started/Explanation_of_interface_privileges.html"}},[this._v("微信")])])}]};var m=e("VU/8")(r,l,!1,function(t){e("jtzX")},"data-v-9aea9b72",null);s.default=m.exports}});
//# sourceMappingURL=1.9ab7240760e9f9159f2a.js.map